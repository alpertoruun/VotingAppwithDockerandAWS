{% extends "_base.html" %}

{% block content %}
<div class="container mt-4">
    <h1 class="mb-4">Oluşturduğum Oylamalarım</h1>
    <input type="text" id="search-input" class="form-control" placeholder="Oylama ismine göre ara">
    
    <div id="election-table">
        {% include 'core/election_table.html' %}
    </div>
</div>

<script>
    document.getElementById('search-input').addEventListener('keyup', function() {
        const searchQuery = this.value;
        fetch(`/my_elections?search=${encodeURIComponent(searchQuery)}`, {
            headers: {
                'X-Requested-With': 'XMLHttpRequest'
            }
        })
        .then(response => response.text())
        .then(html => {
            document.getElementById('election-table').innerHTML = html;
        })
        .catch(error => console.error('Hata:', error));
    });
</script>
{% endblock %}
